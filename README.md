# Twitch

## 1. Тема и целевая аудитория

### Тема

Twitch - видеостриминговый сервис, специализирующийся на тематике компьютерных игр

### Целевая аудитория

- Twitch насчитывает 240 миллионов ежемесячных активных пользователей по всему миру. [[1](#использованные-источники)]
- В любой момент времени на Twitch происходит 98 056 прямых трансляций. [[1](#использованные-источники)]
- Пять стран, на которые приходится наибольший процент зрителей Twitch. [[1](#использованные-источники)]

| Страна               | Процент пользователей Twitch |
|----------------------|----------------------------------|
| Соединенные Штаты     | 29.08%                  |
| Бразилия             | 6.03%                     |
| Германия              | 4.55%                  |
| Япония              | 4.43%                  |
| Россия | 3.48%                  |

- Распределение пользователей по возрастам зрителей Twitch. [[1](#использованные-источники)]

| Возраст | Процентное соотношение |
|---------|-----------------------:|
|16 – 24  |	22.3%                    |
|25 – 34  |	49.7%                    |
|35 – 44  |	17.5%                    |
|45 – 54  |	7.4%                    |
|55 – 64  |	1.9%                    |
|65+      |	1.3%                     |

### MVP функционал:
- Ведение прямой трансляции
- Просмотр прямой трансляции
- Создание канала
- Профиль канала
- Подписка на каналы
- Отправка/получение сообщений в чате
- Поиск трансляций по категориям

### Ключевые продуктовые решения
- Бесконечная лента с трансляциями
- Рекомендации, основанные на истории просмотра категорий
- Подсчет статистики просмотра/ведения трансляции
- Сохранение записей трансляций

# 2. Расчет нагрузки для Twitch

## Основные данные для расчета нагрузки
- **MAU** - 240 млн. пользователей** [[1](#использованные-источники)]
- **DAU** - 35 млн. пользователей** [[1](#использованные-источники)]
- **В любой момент времени на Twitch происходит 98 056 прямых трансляций** [[1](#использованные-источники)]
- **Среднее время просмотра за день — 95 минут** [[1](#использованные-источники)]
- **В день загружается 2 млн новых трансляций** [[1](#использованные-источники)]
- **Средний размер трансляции (на час видео) составляет 3.6 ГБ** [[1](#использованные-источники)]
- **Максимальный размер записи трансляции — 4.5 ГБ/час** [[1](#использованные-источники)]

### Технические метрики

#### Хранилище:
Средний занимаемый размер хранилища пользователем:
- Средний размер аватара пользователя: 1 МБ.
- Видеоархивы сохраняются на некоторое время в зависимости от уровня пользователя:
  - Стандартный пользователь: 14 дней.
  - Партнеры: 60 дней.
  - Средний размер 1 часа видео: ~1,5 ГБ (в зависимости от качества потока).
  
Если каждый пользователь стримит 2 часа в месяц:
- 240 млн пользователей * 2 часа * 1,5 ГБ = 420 млн ГБ = 703 ПБ хранилища для архивов.

#### Сетевой трафик:
- **Средний битрейт стрима**: 6 Мбит/с для 1080p60.
  
Рассчитаем трафик для DAU в среднем и в пике:
- **Среднее количество активных пользователей в любой момент времени**: 35 млн * 95 минут / (24 * 60 минут) ≈ 2 млн пользователей.
  
Средний трафик:
- 2 млн пользователей * 6 Мбит/с ≈ 12 Тбит/с.
  
В пиковое время (9,35 млн пользователей):
- 9,35 млн * 6 Мбит/с ≈ 56 Тбит/с.

#### RPS (Requests Per Second):
Основные операции на Twitch:
| Действие                       | Среднее кол-во в день на одного пользователя |
|--------------------------------|---------------------------------------------|
| Просмотр трансляции            | 1 (95 минут)                               |
| Взаимодействие с чатом         | 20 сообщений                               |
| Подписка на канал              | 0,05 (одна подписка в месяц)               |
| Просмотр профиля стримера      | 1                                           |
| Стриминг видео                 | 0,03 (один стрим в месяц)                  |

| Действие                       | RPS               | RPS в пике (x1,5) |
|--------------------------------|-------------------|-------------------|
| Просмотр трансляции            | 359 RPS           | 538 RPS           |
| Взаимодействие с чатом         | 7181 RPS          | 10 772 RPS        |
| Подписка на канал              | 179 RPS           | 269 RPS           |
| Просмотр профиля стримера      | 359 RPS           | 538 RPS           |
| Стриминг видео                 | 10,8 RPS          | 16,2 RPS          |

---

### Использованные источники

[1. Twitch Usage and Growth Statistics: How Many People Use Twitch? (2024 Statistics)
Written by Brian Dean / Sep. 05, 2024](https://backlinko.com/twitch-users)
[^2]: [Twitch MAU 2023](https://backlinko.com/twitch-users)
[^3]: [Twitch DAU 2023](https://www.twitchmetrics.net)
[^4]: [Twitch demographics](https://www.streamscheme.com/twitch-demographics)
[^5]: [Twitch viewer stats](https://www.demandage.com/twitch-statistics)
